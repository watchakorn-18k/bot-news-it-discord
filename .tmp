Avoiding if-else Hell: The Functional Style